/*0.init*/var _log=5;function log(){"1"!=qs("log")&&"2"!=qs("log")&&"3"!=qs("log")||toast(sargs(arguments),_log),console.log.apply(console,arguments)}function dbg(){"1"==qs("dbg")&&("2"!=qs("log")&&"3"!=qs("log")||toast(sargs(arguments),3*_log),console.log.apply(console,arguments))}function sargs(){var r=Array.prototype.slice.call(arguments[0]);for(var e in r)r[e]=JSON.stringify(r[e]);return replace(r.join(" "),new RegExp('"',"gi"),"")}function warn(){"3"==qs("log")&&toast(sargs(arguments),_log),console.warn.apply(console,arguments)}function qs(r,e){null!==$.urlParam&&void 0!==$.urlParam||($.urlParam=function(r,e){var t=new RegExp("[\\?&]"+r+"=([^&#]*)").exec(window.location.href);return t&&t[1]||e});var t=$.urlParam(r,e);return"undefined"===t?"":t}function error(r,e,t,n,a){var o=lower(trim(r)),l=lower(trim(a?a.toString():"")),i=null!=a&&null!==a.stack&&void 0!==a.stack?a.stack:r,s=trim(i).match(/at https?:\/\/(?!(www\.metastock\.com\/?)).*/gi),g=trim(o).match(/^(((uncaught |unhandled )?script error)|syntaxisfout)[.]?$/gi),u=trim(l).match(/^(((uncaught |unhandled )?script error)|syntaxisfout)[.]?$/gi),c=lower(trim(dataLayer["gtm.errorMessage"]&&!empty(dataLayer["gtm.errorMessage"])?dataLayer["gtm.errorMessage"]:"")),p=lower(trim(dataLayer["gtm.pageError"]&&!empty(dataLayer["gtm.pageError"])?dataLayer["gtm.pageError"]:""));if(s&&0<s.length||g&&0<g.length||u&&0<u.length)return!0;if(o&&!empty(o)&&(c==o||p==o))return!0;if(l&&!empty(l)&&(c==l||p==l))return!0;var m=cleanerr(r,"^uncaught( |:),^referenceerror( |:),^typeerror( |:),^syntaxerror( |:),not defined=undefined");return"1"!==qs("dbg")||nul(toast)||toast(m),warn("error()","rx0=",s,"rx1=",g,"rx2=",u,"msg=",o,"err=",l,"gtm.errorMessage=",c,"gtm.pageError=",p),webevent(d.we,d.ue+"#err="+m,"err="+i+" url="+(empty(e)?document.location.href:e)+" ln="+(null==t||empty(t)?"?":t)+":"+(null==n||empty(n)?"?":n)+" path="+document.location.pathname+document.location.search+document.location.hash),!0}function cleanerr(r,e){var t=(empty(r)?"":r)+"",n=e.split(",");for(var a in n){var o=n[a],l=o.split("=");if(!empty(o)&&!empty(l[0])){var i=new RegExp(l[0],"gi");t=t.replace(i,1<l.length?l[1]:"")}}return trim(t)}function prevent(r){nul(r)||(nul(r.preventDefault)||r.preventDefault(),nul(r.stopImmediatePropagation)||r.stopImmediatePropagation(),nul(r.stopPropagation)||r.stopPropagation())}function lastevent(r){return r||window.event}function lasttarget(r){return(r=lastevent(r)).target||r.srcElement}window._s=window._s||"?",window.dataLayer=window.dataLayer||[],window._u=window._u||JSON.parse(localStorage.getItem("_u")),qs2=function(r,e){var t=new RegExp("[?&]"+r+"=([^&#]*)").exec(window.location.href);return t&&t[1]||e},"0"!==qs("err")&&(window.onerror=function(r,e,t,n,a){return error(r,e,t,n,a)});
/*1.cache*/function setCache(e,t,a=2592e6){const n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))}function getCache(e,t=null){const a=localStorage.getItem(e);if(!a)return t;const n=JSON.parse(a);return(new Date).getTime()>n.expiry?(localStorage.removeItem(e),t):n.value}
/*2.main*/var _scrollto=null,_last_scroll_xp=null,_last_scroll_dur=null;function scrollto(l,o){clearTimeout(_scrollto),_last_scroll_xp=l,_last_scroll_dur=o,_scrollto=setTimeout(function(){l instanceof jQuery?scrollto3("html,body",_last_scroll_xp,_last_scroll_dur):scrollto2("html,body",_last_scroll_xp,_last_scroll_dur)},125)}function scrollto2(l,o,t){try{var s=$(o);if(0===s.length)return;scrollto3(l,s,t)}catch(l){}}function scrollto3(l,o,t){nul(o)||0===o.length||$(l).animate({scrollTop:o.offset().top-0},null==t?5:t)}function _top(){$("html, body").animate({scrollTop:$(".post-title").offset().top},1e3)}
/*scroll*/var lastScroll=0,ts={start:$.now(),scroll:$.now()},scrolltimeout=null,scrolldone=!1,scrollwait=1500;function scroll(){var l=$(document).height(),o=$(window).height();if(dbg("scroll()","scrollHeight=",l,"windowHeight=",o),1==compare(l,o)){var r=$(window).scrollTop(),c=o+r;if(dbg("scroll()","windowScroll=",r,"scrollPosition=",c),0!=c){var t=1-(l-c)/l;if(dbg("scroll()","percentDone=",t,"lastScroll=",lastScroll),1==t&&(scrolldone=!0,scrollwait=3e4),0==lastScroll&&(lastScroll=1-(l-o)/l),lastScroll!=t){var s=t-lastScroll;webevent(d.we,d.ue,document.location.pathname+document.location.search+": scroll "+(100*t).trunc(0)+"% ("+(($.now()-ts.start)/1e3/60).trunc(1)+"m); "+(1==compare(s,0)?"+":"-")+(100*s).trunc(0)+"% ("+(($.now()-ts.scroll)/1e3).trunc(0)+"s)"),ts.scroll=$.now()}lastScroll=t}}}
/*text*/	function trim(t){var n=null!=t?t:"";if(null!==n.trim&&void 0!==n.trim)try{n=n.trim()}catch(t){}return n}function nul(t){return null==t||"undefined"===t}function empty(t){if(nul(t))return!0;if("object"==typeof t)try{t=t[0].value}catch(t){}return 0===trim(t).length}function unhtml(t){var n=document.createElement("DIV");return n.innerHTML=t,n.textContent||n.innerText||""}function trim(t){var n=null!=t?t:"";if(null!==n.trim&&void 0!==n.trim)try{n=n.trim()}catch(t){}return n}function lower(t){var n=null!=t?t:"";if(null!==n.toLowerCase&&void 0!==n.toLowerCase)try{n=n.toLowerCase()}catch(t){}return n}function indexOf(t,n){var r=null!=t?t:"",e=-1;if(null!==r.indexOf&&void 0!==r.indexOf)try{e=r.indexOf(n)}catch(t){}return e}function replace(t,n,r){var e=null!=t?t:"";if(null!==e.replace&&void 0!==e.replace)try{e=e.replace(n,r)}catch(t){}return e}Number.prototype.trunc=function(t){var n=new RegExp("(\\d+\\.\\d{"+t+"})(\\d)"),r=this.toString().match(n);return r?parseFloat(r[1]):this.valueOf()};
/*toast*/	function toast(t,s){var e=$("#toasts"),o=(new Date).getTime();if(0===e.length&&(e=$(".toasts")),0===e.length){var a=$("main");0===a.length&&(a=$("body")),e=$('<div id="toasts" class="toasts"></div>').prependTo(a)}var i=$('<p id="'+o+'" class="show toast">'+t+"</p>").appendTo(e);$(i).click(function(){$(this).toggleClass("show hide").remove()}),nul(s)&&(s=5),0<s&&setTimeout("$('#"+o+"').toggleClass('show hide').remove();",1e3*s)}